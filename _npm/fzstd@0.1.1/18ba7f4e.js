/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/fzstd@0.1.1/esm/index.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var r=ArrayBuffer,t=Uint8Array,e=Uint16Array,n=Int16Array,a=Int32Array,i=function(r,e,n){if(t.prototype.slice)return t.prototype.slice.call(r,e,n);(null==e||e<0)&&(e=0),(null==n||n>r.length)&&(n=r.length);var a=new t(n-e);return a.set(r.subarray(e,n)),a},s=function(r,e,n,a){if(t.prototype.fill)return t.prototype.fill.call(r,e,n,a);for((null==n||n<0)&&(n=0),(null==a||a>r.length)&&(a=r.length);n<a;++n)r[n]=e;return r},o=function(r,e,n,a){if(t.prototype.copyWithin)return t.prototype.copyWithin.call(r,e,n,a);for((null==n||n<0)&&(n=0),(null==a||a>r.length)&&(a=r.length);n<a;)r[e++]=r[n++]},u={InvalidData:0,WindowSizeTooLarge:1,InvalidBlockType:2,FSEAccuracyTooHigh:3,DistanceTooFarBack:4,UnexpectedEOF:5},h=["invalid zstd data","window size too large (>2046MB)","invalid block type","FSE accuracy too high","match distance too far back","unexpected EOF"],f=function(r,t,e){var n=new Error(t||h[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,f),!e)throw n;return n},l=function(r,t,e){for(var n=0,a=0;n<e;++n)a|=r[t++]<<(n<<3);return a},v=function(r,e){var n,i,s=r[0]|r[1]<<8|r[2]<<16;if(3126568==s&&253==r[3]){var o=r[4],u=o>>5&1,h=o>>2&1,v=3&o,b=o>>6;8&o&&f(0);var c=6-u,y=3==v?4:v,w=l(r,c,y),p=b?1<<b:u,g=l(r,c+=y,p)+(1==b&&256),d=g;if(!u){var m=1<<10+(r[5]>>3);d=m+(m>>3)*(7&r[5])}d>2145386496&&f(1);var z=new t((1==e?g||d:e?0:d)+12);return z[0]=1,z[4]=4,z[8]=8,{b:c+p,y:0,l:0,d:w,w:e&&1!=e?e:z.subarray(12),e:d,o:new a(z.buffer,0,3),u:g,c:h,m:Math.min(131072,d)}}if(25481893==(s>>4|r[3]<<20))return 8+(((n=r)[i=4]|n[i+1]<<8|n[i+2]<<16|n[i+3]<<24)>>>0);f(0)},b=function(r){for(var t=0;1<<t<=r;++t);return t-1},c=function(a,i,s){var o=4+(i<<3),u=5+(15&a[i]);u>s&&f(3);for(var h=1<<u,l=h,v=-1,c=-1,y=-1,w=h,p=new r(512+(h<<2)),g=new n(p,0,256),d=new e(p,0,256),m=new e(p,512,h),z=512+(h<<1),k=new t(p,z,h),E=new t(p,z+h);v<255&&l>0;){var A=b(l+1),T=o>>3,F=(1<<A+1)-1,S=(a[T]|a[T+1]<<8|a[T+2]<<16)>>(7&o)&F,x=(1<<A)-1,B=F-l-1,I=S&x;if(I<B?(o+=A,S=I):(o+=A+1,S>x&&(S-=B)),g[++v]=--S,-1==S?(l+=S,k[--w]=v):l-=S,!S)do{var M=o>>3;c=(a[M]|a[M+1]<<8)>>(7&o)&3,o+=2,v+=c}while(3==c)}(v>255||l)&&f(0);for(var U=0,W=(h>>1)+(h>>3)+3,D=h-1,O=0;O<=v;++O){var j=g[O];if(j<1)d[O]=-j;else for(y=0;y<j;++y){k[U]=O;do{U=U+W&D}while(U>=w)}}for(U&&f(0),y=0;y<h;++y){var H=d[k[y]]++,L=E[y]=u-b(H);m[y]=(H<<L)-h}return[o+7>>3,{b:u,s:k,n:E,t:m}]},y=c(new t([81,16,99,140,49,198,24,99,12,33,196,24,99,102,102,134,70,146,4]),0,6)[1],w=c(new t([33,20,196,24,99,140,33,132,16,66,8,33,132,16,66,8,33,68,68,68,68,68,68,68,68,36,9]),0,6)[1],p=c(new t([32,132,16,66,102,70,68,68,68,68,36,73,2]),0,5)[1],g=function(r,t){for(var e=r.length,n=new a(e),i=0;i<e;++i)n[i]=t,t+=1<<r[i];return n},d=new t(new a([0,0,0,0,16843009,50528770,134678020,202050057,269422093]).buffer,0,36),m=g(d,0),z=new t(new a([0,0,0,0,0,0,0,0,16843009,50528770,117769220,185207048,252579084,16]).buffer,0,53),k=g(z,3),E=function(r,t,e){var n=r.length,a=t.length,i=r[n-1],s=(1<<e.b)-1,o=-e.b;i||f(0);for(var u=0,h=e.b,l=(n<<3)-8+b(i)-h,v=-1;l>o&&v<a;){var c=l>>3;u=(u<<h|(r[c]|r[c+1]<<8|r[c+2]<<16)>>(7&l))&s,t[++v]=e.s[u],l-=h=e.n[u]}l==o&&v+1==a||f(0)},A=function(r,t,e){var n=6,a=t.length+3>>2,i=a<<1,s=a+i;E(r.subarray(n,n+=r[0]|r[1]<<8),t.subarray(0,a),e),E(r.subarray(n,n+=r[2]|r[3]<<8),t.subarray(a,i),e),E(r.subarray(n,n+=r[4]|r[5]<<8),t.subarray(i,s),e),E(r.subarray(n),t.subarray(s),e)},T=function(r,n,a){var o,u=n.b,h=r[u],l=h>>1&3;n.l=1&h;var v=h>>3|r[u+1]<<5|r[u+2]<<13,g=(u+=3)+v;if(1==l){if(u>=r.length)return;return n.b=u+1,a?(s(a,r[u],n.y,n.y+=v),a):s(new t(v),r[u])}if(!(g>r.length)){if(0==l)return n.b=g,a?(a.set(r.subarray(u,g),n.y),n.y+=v,a):i(r,u,g);if(2==l){var T=r[u],F=3&T,S=T>>2&3,x=T>>4,B=0,I=0;F<2?1&S?x|=r[++u]<<4|(2&S&&r[++u]<<12):x=T>>3:(I=S,S<2?(x|=(63&r[++u])<<4,B=r[u]>>6|r[++u]<<2):2==S?(x|=r[++u]<<4|(3&r[++u])<<12,B=r[u]>>2|r[++u]<<6):(x|=r[++u]<<4|(63&r[++u])<<12,B=r[u]>>6|r[++u]<<2|r[++u]<<10)),++u;var M=a?a.subarray(n.y,n.y+n.m):new t(n.m),U=M.length-x;if(0==F)M.set(r.subarray(u,u+=x),U);else if(1==F)s(M,r[u++],U);else{var W=n.h;if(2==F){var D=function(r,n){var a=0,i=-1,o=new t(292),u=r[n],h=o.subarray(0,256),l=o.subarray(256,268),v=new e(o.buffer,268);if(u<128){var y=c(r,n+1,6),w=y[0],p=y[1],g=w<<3,d=r[n+=u];d||f(0);for(var m=0,z=0,k=p.b,E=k,A=(++n<<3)-8+b(d);!((A-=k)<g);){var T=A>>3;if(m+=(r[T]|r[T+1]<<8)>>(7&A)&(1<<k)-1,h[++i]=p.s[m],(A-=E)<g)break;z+=(r[T=A>>3]|r[T+1]<<8)>>(7&A)&(1<<E)-1,h[++i]=p.s[z],k=p.n[m],m=p.t[m],E=p.n[z],z=p.t[z]}++i>255&&f(0)}else{for(i=u-127;a<i;a+=2){var F=r[++n];h[a]=F>>4,h[a+1]=15&F}++n}var S=0;for(a=0;a<i;++a)(M=h[a])>11&&f(0),S+=M&&1<<M-1;var x=b(S)+1,B=1<<x,I=B-S;for(I&I-1&&f(0),h[i++]=b(I)+1,a=0;a<i;++a){var M=h[a];++l[h[a]=M&&x+1-M]}var U=new t(B<<1),W=U.subarray(0,B),D=U.subarray(B);for(v[x]=0,a=x;a>0;--a){var O=v[a];s(D,a,O,v[a-1]=O+l[a]*(1<<x-a))}for(v[0]!=B&&f(0),a=0;a<i;++a){var j=h[a];if(j){var H=v[j];s(W,a,H,v[j]=H+(1<<x-j))}}return[n,{n:D,b:x,s:W}]}(r,u);B+=u-(u=D[0]),n.h=W=D[1]}else W||f(0);(I?A:E)(r.subarray(u,u+=B),M.subarray(U),W)}var O=r[u++];if(O){255==O?O=32512+(r[u++]|r[u++]<<8):O>127&&(O=O-128<<8|r[u++]);var j=r[u++];3&j&&f(0);for(var H=[w,p,y],L=2;L>-1;--L){var q=j>>2+(L<<1)&3;if(1==q){var C=new t([0,0,r[u++]]);H[L]={s:C.subarray(2,3),n:C.subarray(0,1),t:new e(C.buffer,0,1),b:0}}else 2==q?(u=(o=c(r,u,9-(1&L)))[0],H[L]=o[1]):3==q&&(n.t||f(0),H[L]=n.t[L])}var G=n.t=H,J=G[0],K=G[1],N=G[2],P=r[g-1];P||f(0);var Q=(g<<3)-8+b(P)-N.b,R=Q>>3,V=0,X=(r[R]|r[R+1]<<8)>>(7&Q)&(1<<N.b)-1,Y=(r[R=(Q-=K.b)>>3]|r[R+1]<<8)>>(7&Q)&(1<<K.b)-1,Z=(r[R=(Q-=J.b)>>3]|r[R+1]<<8)>>(7&Q)&(1<<J.b)-1;for(++O;--O;){var $=N.s[X],_=N.n[X],rr=J.s[Z],tr=J.n[Z],er=K.s[Y],nr=K.n[Y],ar=1<<er,ir=ar+((r[R=(Q-=er)>>3]|r[R+1]<<8|r[R+2]<<16|r[R+3]<<24)>>>(7&Q)&ar-1);R=(Q-=z[rr])>>3;var sr=k[rr]+((r[R]|r[R+1]<<8|r[R+2]<<16)>>(7&Q)&(1<<z[rr])-1);R=(Q-=d[$])>>3;var or=m[$]+((r[R]|r[R+1]<<8|r[R+2]<<16)>>(7&Q)&(1<<d[$])-1);if(R=(Q-=_)>>3,X=N.t[X]+((r[R]|r[R+1]<<8)>>(7&Q)&(1<<_)-1),R=(Q-=tr)>>3,Z=J.t[Z]+((r[R]|r[R+1]<<8)>>(7&Q)&(1<<tr)-1),R=(Q-=nr)>>3,Y=K.t[Y]+((r[R]|r[R+1]<<8)>>(7&Q)&(1<<nr)-1),ir>3)n.o[2]=n.o[1],n.o[1]=n.o[0],n.o[0]=ir-=3;else{var ur=ir-(0!=or);ur?(ir=3==ur?n.o[0]-1:n.o[ur],ur>1&&(n.o[2]=n.o[1]),n.o[1]=n.o[0],n.o[0]=ir):ir=n.o[0]}for(L=0;L<or;++L)M[V+L]=M[U+L];U+=or;var hr=(V+=or)-ir;if(hr<0){var fr=-hr,lr=n.e+hr;fr>sr&&(fr=sr);for(L=0;L<fr;++L)M[V+L]=n.w[lr+L];V+=fr,sr-=fr,hr=0}for(L=0;L<sr;++L)M[V+L]=M[hr+L];V+=sr}if(V!=U)for(;U<M.length;)M[V++]=M[U++];else V=M.length;a?n.y+=V:M=i(M,0,V)}else if(a){if(n.y+=x,U)for(L=0;L<x;++L)M[L]=M[U+L]}else U&&(M=i(M,U));return n.b=g,M}f(2)}},F=function(r,e){if(1==r.length)return r[0];for(var n=new t(e),a=0,i=0;a<r.length;++a){var s=r[a];n.set(s,i),i+=s.length}return n};function S(r,t){for(var e=[],n=+!t,a=0,i=0;r.length;){var s=v(r,n||t);if("object"==typeof s){for(n?(t=null,s.w.length==s.u&&(e.push(t=s.w),i+=s.u)):(e.push(t),s.e=0);!s.l;){var u=T(r,s,t);u||f(5),t?s.e=s.y:(e.push(u),i+=u.length,o(s.w,0,u.length),s.w.set(u,s.w.length-u.length))}a=s.b+4*s.c}else a=s;r=r.subarray(a)}return F(e,i)}var x=function(){function r(r){this.ondata=r,this.c=[],this.l=0,this.z=0}return r.prototype.push=function(r,e){if("number"==typeof this.s){var n=Math.min(r.length,this.s);r=r.subarray(n),this.s-=n}var a=r.length+this.l;if(!this.s){if(e){if(!a)return void this.ondata(new t(0),!0);a<5&&f(5)}else if(a<18)return this.c.push(r),void(this.l=a);if(this.l&&(this.c.push(r),r=F(this.c,a),this.c=[],this.l=0),"number"==typeof(this.s=v(r)))return this.push(r,e)}if("number"!=typeof this.s){if(a<(this.z||3))return e&&f(5),this.c.push(r),void(this.l=a);if(this.l&&(this.c.push(r),r=F(this.c,a),this.c=[],this.l=0),!this.z&&a<(this.z=2&r[this.s.b]?4:3+(r[this.s.b]>>3|r[this.s.b+1]<<5|r[this.s.b+2]<<13)))return e&&f(5),this.c.push(r),void(this.l=a);for(this.z=0;;){var i=T(r,this.s);if(!i){e&&f(5);var s=r.subarray(this.s.b);return this.s.b=0,this.c.push(s),void(this.l+=s.length)}if(this.ondata(i,!1),o(this.s.w,0,i.length),this.s.w.set(i,this.s.w.length-i.length),this.s.l){var u=r.subarray(this.s.b);return this.s=4*this.s.c,void this.push(u,e)}}}else e&&f(5)},r}();export{x as Decompress,u as ZstdErrorCode,S as decompress};export default null;
